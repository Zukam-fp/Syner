<div class="card-top">
<div class="arrow-return">
  <%= link_to  image_tag("arrow.png"), matches_path %>
</div>


<div class="join-match"><h2>Join match</h2></div>
</div>
<!-- Team 1 -->

<div class="field" data-controller="card">
<div class="container-team">
  <div class="team1">
        <%test =  @match.teams.first.user_teams.select {|ut| ut.position =="goalkeeper"}%>
          <% if test.length > 0%>
            <div class="card-goalkeeper2" >
               <div class="testing">
                  <% if test.first.user.photo.attached? %>
                    <%= cl_image_tag test.first.user.photo.key, class: "avatar-match seum4" %>
                  <% else %>
                    <%= image_tag "téléchargé.png", class: "avatar-match seum4" %>
                  <% end %>
                </div>
            </div>
          <% else %>
            <div class="card-goalkeeper" data-action="click->positions#selectPosition" data-action="click->card#replaceWithImage" data-team=<%= @match.teams.first.id %> data-position="goalkeeper" data-positions-target="role">
                <img src="https://www.fifarosters.com/assets/card-creator/Placeholder-SBC-Empty.png" class="img-position-goalkeeper2">
                <%= render 'user_teams/form', match: @match, user_team: @user_team %>
            </div>
          <% end %>


  <div class="container-def">
        <%test =  @match.teams.first.user_teams.select {|ut| ut.position =="defence"}%>
          <% if test.length > 0%>
              <div class="card-players2" >
                 <div class="testing1">
                 <% if test.first.user.photo.attached? %>
                    <%= cl_image_tag test.first.user.photo.key, class: "avatar-match seum4" %>
                  <% else %>
                    <%= image_tag "téléchargé.png", class: "avatar-match seum4" %>
                  <% end %>
                </div>
              </div>
          <% else %>
            <div class="card-players" data-action="click->positions#selectPosition"data-team=<%= @match.teams.first.id %> data-position="defence" data-positions-target="role">
                <img src="https://www.fifarosters.com/assets/card-creator/Placeholder-SBC-Empty.png"  class="img-position">
                <%= render 'user_teams/form', match: @match, user_team: @user_team %>
            </div>
          <% end %>


        <%test =  @match.teams.first.user_teams.select {|ut| ut.position =="defence2"}%>
          <% if test.length > 0%>
              <div class="card-players2" >
                 <div class="testing1">

                  <% if test.first.user.photo.attached? %>
                    <%= cl_image_tag test.first.user.photo.key, class: "avatar-match seum4" %>
                  <% else %>
                    <%= image_tag "téléchargé.png", class: "avatar-match seum4" %>
                  <% end %>

                </div>
              </div>
          <% else %>
              <div class="card-players" data-action="click->positions#selectPosition"data-team=<%= @match.teams.first.id %> data-position="defence2" data-positions-target="role">
                <img src="https://www.fifarosters.com/assets/card-creator/Placeholder-SBC-Empty.png"  class="img-position">
                <%= render 'user_teams/form', match: @match, user_team: @user_team %>
              </div>
          <% end %>
  </div>

  <div class="container-atk">
        <%test =  @match.teams.first.user_teams.select {|ut| ut.position =="attack"}%>
          <% if test.length > 0%>
              <div class="card-players2" >
                 <div class="testing1">

                 <% if test.first.user.photo.attached? %>
                    <%= cl_image_tag test.first.user.photo.key, class: "avatar-match seum4" %>
                  <% else %>
                    <%= image_tag "téléchargé.png", class: "avatar-match seum4" %>
                  <% end %>

                </div>
              </div>
          <% else %>
              <div class="card-players" data-action="click->positions#selectPosition" data-team=<%= @match.teams.first.id %> data-position="attack" data-positions-target="role">
                <img src="https://www.fifarosters.com/assets/card-creator/Placeholder-SBC-Empty.png"  class="img-position">
                <%= render 'user_teams/form', match: @match, user_team: @user_team %>
              </div>
          <% end %>


        <%test =  @match.teams.first.user_teams.select {|ut| ut.position =="attack2"}%>
          <% if test.length > 0%>
              <div class="card-players2" >
                  <div class="testing1">

                  <% if test.first.user.photo.attached? %>
                    <%= cl_image_tag test.first.user.photo.key, class: "avatar-match seum4" %>
                  <% else %>
                    <%= image_tag "téléchargé.png", class: "avatar-match seum4" %>
                  <% end %>

                </div>
              </div>
          <% else %>
              <div class="card-players" data-action="click->positions#selectPosition" data-team=<%= @match.teams.first.id %> data-position="attack2" data-positions-target="role">
                <img src="https://www.fifarosters.com/assets/card-creator/Placeholder-SBC-Empty.png"  class="img-position">
                <%= render 'user_teams/form', match: @match, user_team: @user_team %>
              </div>
          <% end %>
  </div>
</div>
  <!-- Team 2 -->
<div class="team2">
  <div class="container-atk">
        <%test =  @match.teams.second.user_teams.select {|ut| ut.position =="attack3"}%>
          <% if test.length > 0%>
              <div class="card-players2" >
                 <div class="testing1">

                  <% if test.first.user.photo.attached? %>
                    <%= cl_image_tag test.first.user.photo.key, class: "avatar-match seum4" %>
                  <% else %>
                    <%= image_tag "téléchargé.png", class: "avatar-match seum4" %>
                  <% end %>

                </div>
              </div>
          <% else %>
              <div class="card-players" data-action="click->positions#selectPosition" data-team=<%= @match.teams.second.id %> data-position="attack3" data-positions-target="role">
                <img src="https://www.fifarosters.com/assets/card-creator/Placeholder-SBC-Empty.png"  class="img-position">
                <%= render 'user_teams/form', match: @match, user_team: @user_team %>
              </div>
          <% end %>


        <%test =  @match.teams.second.user_teams.select {|ut| ut.position =="attack4"}%>
          <% if test.length > 0%>
              <div class="card-players2" >
                 <div class="testing1">

                  <% if test.first.user.photo.attached? %>
                    <%= cl_image_tag test.first.user.photo.key, class: "avatar-match seum4" %>
                  <% else %>
                    <%= image_tag "téléchargé.png", class: "avatar-match seum4" %>
                  <% end %>

                </div>
              </div>
          <% else %>
              <div class="card-players" data-action="click->positions#selectPosition" data-team=<%= @match.teams.second.id %> data-position="attack4" data-positions-target="role">
                <img src="https://www.fifarosters.com/assets/card-creator/Placeholder-SBC-Empty.png"  class="img-position">
                <%= render 'user_teams/form', match: @match, user_team: @user_team %>
              </div>
          <% end %>
  </div>

  <div class="container-def">
        <%test =  @match.teams.second.user_teams.select {|ut| ut.position =="defence3"}%>
          <% if test.length > 0%>
              <div class="card-players2" >
                  <div class="testing1">

                  <% if test.first.user.photo.attached? %>
                    <%= cl_image_tag test.first.user.photo.key, class: "avatar-match seum4" %>
                  <% else %>
                    <%= image_tag "téléchargé.png", class: "avatar-match seum4" %>
                  <% end %>

                </div>
              </div>
          <% else %>
              <div class="card-players" data-action="click->positions#selectPosition"data-team=<%= @match.teams.second.id %> data-position="defence3" data-positions-target="role">
                <img src="https://www.fifarosters.com/assets/card-creator/Placeholder-SBC-Empty.png"  class="img-position">
                <%= render 'user_teams/form', match: @match, user_team: @user_team %>
              </div>
          <% end %>


        <%test =  @match.teams.second.user_teams.select {|ut| ut.position =="defence4"}%>
          <% if test.length > 0%>
              <div class="card-players2" >
                  <div class="testing1">

                  <% if test.first.user.photo.attached? %>
                    <%= cl_image_tag test.first.user.photo.key, class: "avatar-match seum4" %>
                  <% else %>
                    <%= image_tag "téléchargé.png", class: "avatar-match seum4" %>
                  <% end %>

                </div>
              </div>
          <% else %>
              <div class="card-players" data-action="click->positions#selectPosition"data-team=<%= @match.teams.second.id %> data-position="defence4" data-positions-target="role">
                <img src="https://www.fifarosters.com/assets/card-creator/Placeholder-SBC-Empty.png"  class="img-position">
                <%= render 'user_teams/form', match: @match, user_team: @user_team %>
              </div>
          <% end %>
  </div>



        <%test =  @match.teams.second.user_teams.select {|ut| ut.position =="goalkeeper2"}%>
          <% if test.length > 0%>
              <div class="card-goalkeeper2" >
                <div class="testing">

                  <% if test.first.user.photo.attached? %>
                    <%= cl_image_tag test.first.user.photo.key, class: "avatar-match seum4" %>
                  <% else %>
                    <%= image_tag "téléchargé.png", class: "avatar-match seum4" %>
                  <% end %>

                </div>
              </div>
          <% else %>
              <div class="card-goalkeeper" data-action="click->positions#selectPosition" data-action="click->card#replaceWithImage" data-team=<%= @match.teams.second.id %> data-position="goalkeeper2" data-positions-target="role">
                <img src="https://www.fifarosters.com/assets/card-creator/Placeholder-SBC-Empty.png" class="img-position-goalkeeper2">
                <%= render 'user_teams/form', match: @match, user_team: @user_team %>
              </div>
          <% end %>

    </div>
</div>
<br/>


<div class="box">
  <div class="capitaine">
    <p><strong> Captain : <%= @match.user.first_name %> <%= image_tag("capitaine.png") %></strong></p>

</div>

  <br>
  <div class="table-team">
  <% @match.teams.each do |team| %>
    <div data-positions-target="players"><strong>Team <%= team.name %></strong>
      <% team.user_teams.each do |user_team|%>
        <div data-target="card.role" data-role-value="<%= user_team.position %>">


          <%= user_team.user.first_name %>
          <%= user_team.position %>
        </div>
        <%  end %>
      </div>
    <% end %>
  </div>
  <br>

 <div class="match-info">
  <div class="info-item">
    <i class="fa-solid fa-location-dot" style="color: #5356FF;"></i>
    <p><%= @match.address %></p>
  </div>
  <div class="info-item">
    <i class="fa-regular fa-calendar" style="color: #5356FF;"></i>
    <p><%= @match.date.strftime("%d/%m/%Y") %></p>
  </div>
  <div class="info-item">
    <i class="fa-solid fa-users" style="color: #5356FF;"></i>
    <p><%= @match.user_teams.count %>/10</p>
  </div>
</div>
</div>
</div>
